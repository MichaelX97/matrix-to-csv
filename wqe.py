import matplotlib.pyplot as plt  <br>import  numpy as np<br>from scipy import optimize<br>data= np.loadtxt(open("C:/Users/xhs/Desktop/123/kb.csv","rb"),delimiter=",",skiprows=0)<br>datax = data[:,0]<br>datay = data[:,1]<br>n=20<br>conversion=0.1<br>GENERATION_COST1=0.03<br>GENERATION_COST2=0.0860<br>penalty=5<br>Y=np.zeros(n)<br>Y0=np.zeros(n)<br>Y1=np.zeros(n)<br>Y2=np.zeros(n)<br>COST=np.zeros(n)<br>for i in range(n):<br>    GENERATION_COST1 = GENERATION_COST1+0.003<br>    def mon(x3):<br>        M = x3 * datax * conversion<br>        return M<br><br>    def cf(A, x1):<br>        M = (datay * 1000 - A - x1) * GENERATION_COST2<br>        for i in range(8760):<br>            if M[i] < 0:<br>                M[i] = 0<br>        return M<br><br>    def R_cf(A, x1, x2):<br>        M = (datay * 1000 - A - x1 - x2) * (penalty - GENERATION_COST2)<br>        for i in range(8760):<br>            if M[i] < 0:<br>                M[i] = 0<br>        return M<br>    <br>    def IC(x1):<br>        M = x1 * GENERATION_COST1<br>        return M<br>    <br>    def f(x):<br>        A =mon(x[2])<br>        Y1 =cf(A, x[0])<br>        Y2 =R_cf(A, x[0], x[1])<br>        Y3 =IC(x[0])<br>        cost = 0<br>        for i in range(8760):<br>            cost = cost + Y1[i] + Y2[i] + Y3<br>        cost = cost + x[0] * 150 + 2.5 * x[1] + x[2] * 50<br>        return cost<br>    result = optimize.fmin_l_bfgs_b(f, np.array([1, 1, 1]), approx_grad=1,bounds=((0, 10000000), (0, 100000000), (0, 10000000)))<br>    X = result[0]<br>    COST = result[1]<br>    Y0[i]=X[0]<br>    Y1[i]=X[1]<br>    Y2[i]=X[2]<br>    Y[i]=X[2]/X[1]<br>plt.plot(range(n), COST,'g')<br>plt.plot(range(n), Y0,'b')<br>plt.plot(range(n), Y2,'r')<br>plt.plot(range(n), Y1,'y')  <br>plt.show<br>
